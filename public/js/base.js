// Generated by CoffeeScript 1.4.0
(function() {

  $(function() {
    $('li.new-element').click(function() {
      var new_form;
      new_form = $(this).siblings('.new-form').first();
      return $(this).animate({
        opacity: 0
      }, 250, "swing", function() {
        new_form.delay(250).slideDown(500, function() {});
        return new_form.delay(250).fadeIn(500, function() {
          var form_body;
          form_body = new_form.children('.form-body');
          return form_body.slideDown(500);
        });
      });
    });
    $('input.cancel').click(function() {
      var form_body, new_element_button, new_form;
      form_body = $(this).parent();
      new_form = form_body.parent();
      new_element_button = new_form.siblings('li.new-element').first();
      return form_body.slideUp(500, function() {
        return new_form.delay(250).slideUp(500, function() {
          return new_element_button.delay(250).animate({
            opacity: 1
          });
        });
      });
    });
    return $('form').submit(function(e) {
      var form_action, form_data;
      e.preventDefault();
      form_data = $(this).serialize();
      form_action = $(this).attr('action');
      return $.post(form_action, form_data).done(function(data) {
        var form_body, form_head, form_title_input;
        alert("Form submission passed: " + data.responseText);
        form_head = $(this).children('.form-head').first();
        form_body = $(this).children('.form-body').first();
        form_title_input = form_head.children('input[name="title"]').first();
        form_title_input.prop('disabled', true);
        return form_body.slideUp(500, function() {
          return form_title_input.animate({
            background: "transparent"
          }, 500);
        });
      }).fail(function(data) {
        return alert("Form submission failed: " + data.responseText);
      });
    });
  });

}).call(this);
